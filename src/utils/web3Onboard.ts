import { init } from '@web3-onboard/react'
import injectedModule, { ProviderLabel } from '@web3-onboard/injected-wallets'
import gnosisModule from '@web3-onboard/gnosis'
import walletConnectModule from '@web3-onboard/walletconnect'
import trustModule from '@web3-onboard/trust'

const wcV2InitOptions = {
  projectId: process.env.NEXT_PUBLIC_WALLETCONNECT ?? '',
  requiredChains: [137, 43114],
  dappUrl: 'https://app.kassandra.finance',
  version: 2 as const
}

const injected = injectedModule({
  displayUnavailable: true,
  sort: wallets => {
    const metaMask = wallets.find(
      ({ label }) => label === ProviderLabel.MetaMask
    )
    const coinbase = wallets.find(
      ({ label }) => label === ProviderLabel.Coinbase
    )

    return (
      [
        metaMask,
        coinbase,
        ...wallets.filter(
          ({ label }) =>
            label !== ProviderLabel.MetaMask && label !== ProviderLabel.Coinbase
        )
      ]
        // remove undefined values
        .flatMap(wallet => (wallet ? wallet : []))
    )
  }
})
const walletConnect = process.env.NEXT_PUBLIC_WALLETCONNECT
  ? walletConnectModule(wcV2InitOptions)
  : undefined
const gnosis = gnosisModule()
const trust = trustModule()

const wallets = walletConnect
  ? [walletConnect, gnosis, trust, injected]
  : [gnosis, trust, injected]

const chains = [
  {
    id: '0xa86a',
    token: 'AVAX',
    label: 'Avalanche',
    rpcUrl: 'https://api.avax.network/ext/bc/C/rpc',
    blockExplorerUrl: 'https://snowtrace.io',
    color: '#E84142',
    icon: `<svg width="1503" height="1504" viewBox="0 0 1503 1504" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="287" y="258" width="928" height="844" fill="white"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M1502.5 752C1502.5 1166.77 1166.27 1503 751.5 1503C336.734 1503 0.5 1166.77 0.5 752C0.5 337.234 336.734 1 751.5 1C1166.27 1 1502.5 337.234 1502.5 752ZM538.688 1050.86H392.94C362.314 1050.86 347.186 1050.86 337.962 1044.96C327.999 1038.5 321.911 1027.8 321.173 1015.99C320.619 1005.11 328.184 991.822 343.312 965.255L703.182 330.935C718.495 303.999 726.243 290.531 736.021 285.55C746.537 280.2 759.083 280.2 769.599 285.55C779.377 290.531 787.126 303.999 802.438 330.935L876.42 460.079L876.797 460.738C893.336 489.635 901.723 504.289 905.385 519.669C909.443 536.458 909.443 554.169 905.385 570.958C901.695 586.455 893.393 601.215 876.604 630.549L687.573 964.702L687.084 965.558C670.436 994.693 661.999 1009.46 650.306 1020.6C637.576 1032.78 622.263 1041.63 605.474 1046.62C590.161 1050.86 573.004 1050.86 538.688 1050.86ZM906.75 1050.86H1115.59C1146.4 1050.86 1161.9 1050.86 1171.13 1044.78C1181.09 1038.32 1187.36 1027.43 1187.92 1015.63C1188.45 1005.1 1181.05 992.33 1166.55 967.307C1166.05 966.455 1165.55 965.588 1165.04 964.706L1060.43 785.75L1059.24 783.735C1044.54 758.877 1037.12 746.324 1027.59 741.472C1017.08 736.121 1004.71 736.121 994.199 741.472C984.605 746.453 976.857 759.552 961.544 785.934L857.306 964.891L856.949 965.507C841.69 991.847 834.064 1005.01 834.614 1015.81C835.352 1027.62 841.44 1038.5 851.402 1044.96C860.443 1050.86 875.94 1050.86 906.75 1050.86Z" fill="#E84142"/>
</svg>`,
    secondaryTokens: [
      {
        address: '0xf32398dae246C5f672B52A54e9B413dFFcAe1A44',
        icon: 'https://s2.coinmarketcap.com/static/img/coins/64x64/17587.png'
      }
    ]
  },
  {
    id: '0x89',
    token: 'MATIC',
    label: 'Polygon - POS',
    rpcUrl: 'https://rpc.ankr.com/polygon',
    blockExplorerUrl: 'https://polygonscan.com',
    color: '#7b3fe4',
    icon: `<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500">
	<defs>
		<style>
			.cls-1 {
				fill: #fff;
			}

			.cls-2 {
				clip-path: url(#clippath);
			}

			.cls-3 {
				fill: none;
			}

			.cls-4 {
				fill: url(#linear-gradient);
			}
		</style>
		<clipPath id="clippath">
			<circle class="cls-3" cx="250" cy="250" r="244.91" />
		</clipPath>
		<linearGradient id="linear-gradient" x1="-116.09" y1="25.97" x2="437.45" y2="364.71" gradientUnits="userSpaceOnUse">
			<stop offset="0" stop-color="#a229c5" />
			<stop offset="1" stop-color="#7b3fe4" />
		</linearGradient>
	</defs>
	<g class="cls-2">
		<rect class="cls-4" x="-18.1" y="-18.1" width="536.2" height="536.2" />
	</g>
	<path class="cls-1"
		d="m320.83,302.85l69.29-40.01c3.67-2.12,5.94-6.06,5.94-10.3v-80.01c0-4.23-2.28-8.18-5.94-10.3l-69.29-40.01c-3.67-2.12-8.22-2.11-11.89,0l-69.29,40.01c-3.67,2.12-5.94,6.07-5.94,10.3v142.99l-48.59,28.05-48.59-28.05v-56.11l48.59-28.05,32.05,18.5v-37.64l-26.11-15.07c-1.8-1.04-3.86-1.59-5.95-1.59s-4.15.55-5.94,1.59l-69.29,40.01c-3.67,2.12-5.94,6.06-5.94,10.3v80.01c0,4.23,2.28,8.18,5.94,10.3l69.29,40.01c3.66,2.11,8.22,2.11,11.89,0l69.29-40c3.67-2.12,5.94-6.07,5.94-10.3v-142.99l.88-.5,47.71-27.55,48.59,28.05v56.11l-48.59,28.05-32-18.48v37.64l26.06,15.05c3.67,2.11,8.22,2.11,11.89,0Z" />
</svg>`,
    secondaryTokens: [
      {
        address: '0x366e293a5cf90a0458d9ff9f3f92234da598f62e',
        icon: 'https://s2.coinmarketcap.com/static/img/coins/64x64/17587.png'
      }
    ]
  },
  {
    id: '0xa4b1',
    token: 'ETH',
    label: 'Arbitrum One',
    rpcUrl: 'https://arbitrum-one.publicnode.com',
    blockExplorerUrl: 'https://arbiscan.io/',
    color: '#96BEDC',
    icon: `<svg width="22" height="24" viewBox="0 0 22 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.4224 10.9962L15.1893 8.00571L19.9515 15.4049L19.9537 16.8244L19.9381 7.05324C19.9326 6.93538 19.8987 6.82058 19.8393 6.71854C19.7799 6.61649 19.6968 6.5302 19.5969 6.46694L11.0232 1.54757C10.9207 1.49902 10.8087 1.47408 10.6952 1.47462C10.5818 1.47515 10.47 1.50114 10.368 1.55065C10.3416 1.56388 10.3159 1.57867 10.2912 1.59495L10.2614 1.61376L1.93897 6.42453L1.90656 6.43906C1.86343 6.45899 1.82227 6.48293 1.78363 6.51056C1.62755 6.62174 1.52118 6.78935 1.48719 6.97764C1.48199 7.00621 1.47844 7.03504 1.47656 7.06401L1.48959 15.0265L5.92539 8.16819C6.48381 7.25882 7.70059 6.96584 8.83012 6.98175L10.1558 7.01595L2.34445 19.5122L3.26532 20.041L11.1703 7.02844L14.6643 7.01578L6.77973 20.3562L10.0658 22.2427L10.4584 22.4679C10.6278 22.5351 10.8158 22.5388 10.9877 22.4784L19.682 17.4523L18.0189 18.4131L13.4224 10.9962ZM14.0966 20.6812L10.778 15.4854L12.8037 12.0564L17.162 18.909L14.0966 20.6812Z" fill="#2D374B"/>
<path d="M10.7812 15.4856L14.0999 20.6812L17.1654 18.909L12.8073 12.0566L10.7812 15.4856Z" fill="#28A0F0"/>
<path d="M19.962 16.8246L19.9598 15.405L15.1975 8.00586L13.4297 10.996L18.027 18.4129L19.6901 17.4521C19.7706 17.387 19.8364 17.3057 19.8833 17.2134C19.9302 17.1212 19.9571 17.0202 19.9622 16.9169L19.962 16.8246Z" fill="#28A0F0"/>
<path d="M0 18.1642L2.34734 19.5135L10.1587 7.01724L8.83301 6.98303C7.70349 6.96713 6.4867 7.25993 5.92828 8.16947L1.49249 15.0278L0.000858095 17.315V18.1649L0 18.1642Z" fill="white"/>
<path d="M14.6644 7.0166L11.1706 7.02926L3.26562 20.0418L6.02856 21.6288L6.77987 20.3576L14.6644 7.0166Z" fill="white"/>
<path d="M21.4292 6.99858C21.4132 6.6389 21.3098 6.28849 21.1278 5.97757C20.9458 5.66665 20.6907 5.40455 20.3846 5.21387L11.6985 0.231045C11.3884 0.0790407 11.0475 0 10.702 0C10.3565 0 10.0156 0.0790407 9.70553 0.231045C9.633 0.267475 1.25845 5.11262 1.25845 5.11262C1.1421 5.16835 1.03081 5.23404 0.925837 5.30896C0.653911 5.50186 0.429338 5.75372 0.268984 6.04562C0.10863 6.33752 0.0166664 6.66187 0 6.99431V17.314L1.49163 15.0268L1.48014 7.0646C1.48712 6.95544 1.51828 6.84918 1.57138 6.75348C1.62448 6.65777 1.69819 6.57501 1.78721 6.51114C1.82664 6.48292 10.3442 1.56475 10.3713 1.55124C10.4732 1.50172 10.5851 1.47574 10.6985 1.47521C10.8119 1.47467 10.924 1.49961 11.0264 1.54816L19.6002 6.46787C19.7 6.53113 19.7831 6.61742 19.8425 6.71946C19.9019 6.82151 19.9358 6.93631 19.9414 7.05417V16.9179C19.9393 17.0201 19.9154 17.1208 19.8711 17.2131C19.8269 17.3054 19.7635 17.3872 19.685 17.453L18.022 18.4139L17.1647 18.9099L14.0991 20.6821L10.9902 22.4795C10.8183 22.54 10.6303 22.5363 10.4609 22.469L6.78279 20.3587L6.03149 21.6298L9.33708 23.5282C9.44646 23.5902 9.54385 23.6452 9.62374 23.69C9.74753 23.7584 9.83189 23.8055 9.86155 23.8199C10.1381 23.9407 10.4371 24.0021 10.739 23.9999C11.0159 24.0003 11.2905 23.9488 11.5483 23.8481L20.5781 18.6316C20.8329 18.4339 21.0411 18.1829 21.1881 17.8963C21.3351 17.6097 21.4173 17.2944 21.4289 16.9726L21.4292 6.99858Z" fill="#96BEDC"/>
</svg>`
  }
  // {
  //   id: '0x5',
  //   token: 'ETH',
  //   label: 'Goerli Test Network',
  //   rpcUrl: 'https://rpc.ankr.com/eth_goerli'
  // }
]

const appMetadata = {
  name: 'Kassandra',
  icon: `<svg width="116" height="105" viewBox="0 0 604 522" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M301.651 31.4728C338.118 31.4728 373.507 38.5345 406.845 52.4649C439.137 65.9611 468.132 85.2884 493.042 109.916C518.007 134.6 537.6 163.37 551.273 195.421C565.461 228.679 572.651 264.116 572.651 300.76C572.651 337.613 565.589 373.292 551.659 406.815C539.047 437.153 521.361 464.483 499.025 488.129L412.017 406.815H446.014C475.838 406.815 500.103 382.549 500.103 352.726C500.103 322.902 475.838 298.637 446.014 298.637H157.118C127.295 298.637 103.029 322.902 103.029 352.726C103.029 382.549 127.295 406.815 157.118 406.815H197.261L104.34 488.21C81.9808 464.539 64.2621 437.185 51.6346 406.815C37.7042 373.3 30.6344 337.613 30.6344 300.768C30.6344 263.923 37.8248 228.679 52.0126 195.429C65.6857 163.378 85.2784 134.608 110.244 109.924C135.153 85.2964 164.156 65.9691 196.44 52.473C229.779 38.5425 265.168 31.4808 301.635 31.4808M301.651 0.909424C136.054 0.909424 0.0791016 133.699 0.0791016 300.768C0.0791016 384.238 33.2242 460.099 87.3615 514.607C92.0104 519.288 98.0909 521.596 104.147 521.596C110.887 521.596 117.603 518.741 122.308 513.111L266.985 386.385C269.969 382.123 266.921 376.267 261.725 376.259H157.126C144.137 376.259 133.601 365.723 133.601 352.734C133.601 339.744 144.137 329.208 157.126 329.208H446.014C459.004 329.208 469.54 339.744 469.54 352.734C469.54 365.723 459.004 376.259 446.014 376.259H350.649C345.445 376.259 342.405 382.123 345.388 386.385L480.985 513.111C485.69 518.741 492.406 521.596 499.146 521.596C505.203 521.596 511.283 519.288 515.932 514.607C570.077 460.107 603.214 384.238 603.214 300.768C603.214 133.699 467.248 0.909424 301.659 0.909424L301.651 0.909424Z" fill="url(#paint0_linear_339_161)"/>
          <defs>
            <linearGradient id="paint0_linear_339_161" x1="301.643" y1="0.909424" x2="301.643" y2="521.596" gradientUnits="userSpaceOnUse">
              <stop offset="0.01" stop-color="#FFBF00"/>
              <stop offset="1" stop-color="#E843C4"/>
            </linearGradient>
          </defs>
        </svg>`,
  logo: `<svg width="116" height="105" viewBox="0 0 604 522" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M301.651 31.4728C338.118 31.4728 373.507 38.5345 406.845 52.4649C439.137 65.9611 468.132 85.2884 493.042 109.916C518.007 134.6 537.6 163.37 551.273 195.421C565.461 228.679 572.651 264.116 572.651 300.76C572.651 337.613 565.589 373.292 551.659 406.815C539.047 437.153 521.361 464.483 499.025 488.129L412.017 406.815H446.014C475.838 406.815 500.103 382.549 500.103 352.726C500.103 322.902 475.838 298.637 446.014 298.637H157.118C127.295 298.637 103.029 322.902 103.029 352.726C103.029 382.549 127.295 406.815 157.118 406.815H197.261L104.34 488.21C81.9808 464.539 64.2621 437.185 51.6346 406.815C37.7042 373.3 30.6344 337.613 30.6344 300.768C30.6344 263.923 37.8248 228.679 52.0126 195.429C65.6857 163.378 85.2784 134.608 110.244 109.924C135.153 85.2964 164.156 65.9691 196.44 52.473C229.779 38.5425 265.168 31.4808 301.635 31.4808M301.651 0.909424C136.054 0.909424 0.0791016 133.699 0.0791016 300.768C0.0791016 384.238 33.2242 460.099 87.3615 514.607C92.0104 519.288 98.0909 521.596 104.147 521.596C110.887 521.596 117.603 518.741 122.308 513.111L266.985 386.385C269.969 382.123 266.921 376.267 261.725 376.259H157.126C144.137 376.259 133.601 365.723 133.601 352.734C133.601 339.744 144.137 329.208 157.126 329.208H446.014C459.004 329.208 469.54 339.744 469.54 352.734C469.54 365.723 459.004 376.259 446.014 376.259H350.649C345.445 376.259 342.405 382.123 345.388 386.385L480.985 513.111C485.69 518.741 492.406 521.596 499.146 521.596C505.203 521.596 511.283 519.288 515.932 514.607C570.077 460.107 603.214 384.238 603.214 300.768C603.214 133.699 467.248 0.909424 301.659 0.909424L301.651 0.909424Z" fill="url(#paint0_linear_339_161)"/>
          <defs>
            <linearGradient id="paint0_linear_339_161" x1="301.643" y1="0.909424" x2="301.643" y2="521.596" gradientUnits="userSpaceOnUse">
              <stop offset="0.01" stop-color="#FFBF00"/>
              <stop offset="1" stop-color="#E843C4"/>
            </linearGradient>
          </defs>
        </svg>`,
  description: 'Example showcasing how to connect a wallet.',
  gettingStartedGuide: 'https://www.kassandra.finance/managers',
  explore: 'https://www.kassandra.finance/',
  recommendedInjectedWallets: [{ name: 'MetaMask', url: 'https://metamask.io' }]
  // agreement: {
  //   // user agrees with exact version of terms and privacy policy
  //   version: '0.0',
  //   // url that points to the Terms & Conditions of the dapp
  //   termsUrl: 'https://www.kassandra.finance/',
  //   // url that points to the Privacy policy of the dapp
  //   privacyUrl: 'https://www.kassandra.finance/'
  // }
}

const web3Onboard = init({
  theme: {
    '--w3o-background-color':
      'linear-gradient(164.99deg, #1b1d22 19.85%, #333437 116.33%)',
    '--w3o-foreground-color': '#1B1D22',
    '--w3o-text-color': '#fcfcfc',
    '--w3o-border-color': 'rgba(255, 255, 255, 0.05)',
    '--w3o-action-color': 'unset',
    '--w3o-border-radius': '8px',
    '--w3o-font-family': 'Rubik'
  },
  disableFontDownload: true,
  wallets,
  chains,
  appMetadata,
  connect: {
    autoConnectLastWallet: true
  },
  accountCenter: {
    desktop: {
      enabled: false
    },
    mobile: {
      enabled: false
    }
  }
})

export default web3Onboard
